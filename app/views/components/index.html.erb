<%= link_to "Add Component", new_component_path, class: 'btn btn-success pull-right', id: 'Add Component' %>
<% if has_role('admin') %>
  <%= link_to "Load Default Components To Database", load_components_path, class: 'btn btn-danger'%>
  <%= link_to "Export Components To Zipfile", export_components_path, class: 'btn btn-danger'%>

  <%= form_tag import_components_path(@organization.slug), multipart: true, :html => { :class => "form-horizontal col-md-9" } do %>
    <div class="form-group">
      <div class="controls">
        <%= file_field_tag :file, accept: '.zip', class: "btn btn-default" %>
      </div>
    </div>
    <%= submit_tag "Import Components", class: "btn btn-default" %>
  <% end %>
<% end %>
<h1>
  <small><%= @organization.name %></small>
  <br>
  Components
</h1>

<% if session[:admin_authorized] %>
<ul class="nav nav-pills">
  <li <% if current_page? components_path category: 'document' %>class="active"<% end %>>
    <%= link_to 'Documents', components_path(category: 'document') %>
  </li>
  <li <% if current_page? components_path category: 'section' %>class="active"<% end %>>
    <%= link_to 'Sections', components_path(category: 'section') %>
  </li>
  <li <% if current_page? components_path category: 'element' %>class="active"<% end %>>
    <%= link_to 'Elements', components_path(category: 'element') %>
  </li>
  <li <% if !params[:category] %>class="active"<% end %>>
    <%= link_to 'All Components', components_path %>
  </li>
</ul>
<% end %>

<% if @components.count > 0 %>
  <ul class="media-list">
    <hr>
    <% @components.each do |component| %>
      <li class="media">

        <h2>
          <%= link_to component.name, edit_component_path(@organization[:slug], component.slug, category: component.category) %>
          <a class="clearfix pull-right btn btn-default" href="<%= edit_component_path @organization[:slug], component.slug %>">Edit</a>
        </h2>
        <p><%= component.description %></p>
        <em>
          /<%= component.slug %>
        </em>
        <%= component.category %>
        <%= component.format %>
      </li>
      <hr>
    <% end %>
  </ul>

<% else %>
  <div class="alert alert-warning">
    There are no <% if params['category'] %><code><%= params[:category] %></code><% end %> components for this organization.
  </div>
<% end %>
